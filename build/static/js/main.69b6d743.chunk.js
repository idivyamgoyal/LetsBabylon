(this.webpackJsonpletsbabylon=this.webpackJsonpletsbabylon||[]).push([[0],{109:function(e,t,n){"use strict";n.r(t);var a,s,c=n(18),i=n.n(c),o=n(55),r=n.n(o),l=(n(68),n(69),n(36)),d=n.n(l),m=n(56),h=n(57),u=n(58),j=n(61),b=n(60),p=n(37),y=n.n(p),v=n(63),f=n(62),g=n(17),x=n(9),O=function(e){var t=Object(c.useRef)(null),n=e.antialias,a=e.engineOptions,s=e.adaptToDeviceRatio,i=e.sceneOptions,o=e.onRender,r=(e.onSceneReady,e.image,Object(f.a)(e,["antialias","engineOptions","adaptToDeviceRatio","sceneOptions","onRender","onSceneReady","image"]));return Object(c.useEffect)((function(){if(t.current){var c=new g.b(t.current,n,a,s),r=new g.e(c,i);r.isReady()?e.onSceneReady(r,e.image):r.onReadyObservable.addOnce((function(t){return e.onSceneReady(t,e.image)})),c.runRenderLoop((function(){"function"===typeof o&&o(r),r.render()}));var l=function(){r.getEngine().resize()};return window&&window.addEventListener("resize",l),function(){r.getEngine().dispose(),window&&window.removeEventListener("resize",l)}}})),Object(x.jsx)("canvas",Object(v.a)({ref:t},r))},w={onSceneReady:function(e,t){var n=new g.a("Camera",Math.PI/2,Math.PI/2,2,new g.h(0,4.5,-15),e);n.setTarget(g.h.Zero());var s=e.getEngine().getRenderingCanvas();n.attachControl(s,!0),new g.c("light",new g.h(0,.5,.5),e).intensity=10,a=g.d.CreateBox("box",{size:4},e);var c=new g.f("material",e);c.diffuseTexture=new g.g(t,e),a.position.y=1,a.material=c},onRender:function(e){if(void 0!==a){var t=e.getEngine().getDeltaTime();a.rotation.y+=5/60*Math.PI*2*(t/1e3)}}},C="pk.eyJ1IjoiZGl2eWFtZ295YWwiLCJhIjoiY2txZTR3cXp0MDRkMzJ2cXUwdmlzdnJhMCJ9.7MzxywKX2eOK3Ewk1PEj_Q",N=n(59),S=n.n(N);y.a.accessToken=C;var R=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).mapFunction=function(){(s=new y.a.Map({container:a.mapContainer.current,style:"mapbox://styles/mapbox/outdoors-v11",zoom:a.state.zoom,center:[a.state.lng,a.state.lat],preserveDrawingBuffer:!0})).resize()},a.handleClick=function(){document.getElementsByClassName("mapSelector")[0].style.display="none",document.getElementsByClassName("mapBtn")[0].style.display="block",a.setState({image:s.getCanvas().toDataURL()})},a.setCity=function(e){a.setState({city:e.target.value})},a.onSubmit=function(){var e=Object(m.a)(d.a.mark((function e(t){var n,c,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,S.a.get("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(a.state.city,".json?access_token=").concat(C));case 4:n=e.sent,c=n.data.features[0].center[1],i=n.data.features[0].center[0],a.setState({lat:c,lng:i,city:""},(function(){console.log(a.state.lat,a.state.lng),s.flyTo({center:[a.state.lng,a.state.lat],essential:!0})})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log("Error in location: "+e.t0),alert("Invalid Search!");case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),a.showSelector=function(){document.getElementsByClassName("mapSelector")[0].style.display="block",s.resize(),document.getElementsByClassName("mapBtn")[0].style.display="none"},a.hideMap=function(){document.getElementsByClassName("mapSelector")[0].style.display="none",document.getElementsByClassName("mapBtn")[0].style.display="block"},a.state={lat:28.6139391,lng:77.2090212,zoom:9,city:"",image:""},a.mapContainer=i.a.createRef(),a.mapSnap=i.a.createRef(),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.mapFunction()}},{key:"render",value:function(){return Object(x.jsxs)("div",{className:"fullBody",children:[Object(x.jsxs)("div",{className:"mainDiv",children:[Object(x.jsxs)("div",{className:"header",children:[Object(x.jsx)("span",{className:"headerText-left",children:Object(x.jsx)("a",{href:".",children:"Lets Babylon!"})}),Object(x.jsx)("a",{href:"https://divyamgoyal.com",children:Object(x.jsx)("img",{src:"/assets/favicons/favicon.ico",className:"headerText-right",alt:"DivyamGoyal"})})]}),Object(x.jsx)("div",{className:"appBody",children:Object(x.jsxs)("div",{ref:this.mapSnap,id:"screenshotPlaceholder",children:[Object(x.jsx)(O,{antialias:!0,onSceneReady:w.onSceneReady,onRender:w.onRender,image:this.state.image,id:"my-canvas"}),Object(x.jsxs)("div",{className:"mapSelector",children:[Object(x.jsxs)("div",{className:"searchForm",children:[Object(x.jsx)("div",{className:"form-group",children:Object(x.jsx)("button",{className:"btn btn-danger",onClick:this.handleClick,children:"Take Screenshot"})}),Object(x.jsxs)("form",{className:"form-inline",onSubmit:this.onSubmit,children:[Object(x.jsx)("div",{className:"form-group mx-sm-3 mb-2",children:Object(x.jsx)("input",{className:"form-control",placeholder:"Enter the City Name",onChange:this.setCity,value:this.state.city})}),Object(x.jsx)("input",{className:"btn btn-success mb-2",type:"submit",value:"Search"})]})]}),Object(x.jsx)("div",{ref:this.mapContainer,className:"map-container"}),Object(x.jsx)("div",{className:"closeMap",children:Object(x.jsx)("button",{className:"btn btn-warning circleBtn",onClick:this.hideMap,children:"X"})})]}),Object(x.jsx)("div",{className:"mapBtn",children:Object(x.jsx)("button",{className:"btn btn-light",onClick:this.showSelector,children:"Map"})})]})})]}),Object(x.jsx)("div",{className:"myFooter",children:Object(x.jsxs)("div",{className:"container",children:[Object(x.jsx)("a",{href:"https://divyamgoyal.com",children:Object(x.jsx)("img",{src:"/assets/favicons/favicon-32x32.png",className:"headerText-right",alt:"DivyamGoyal"})}),Object(x.jsxs)("div",{children:["Developed by ",Object(x.jsx)("a",{href:"https://divyamgoyal.com",children:"Divyam Goyal"}),"."]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("a",{href:"https://github.com/idivyamgoyal",children:"Github"})," | ",Object(x.jsx)("a",{href:"https://linkedin.com/in/idivyamgoyal",children:"LinkedIn"})," | ",Object(x.jsx)("a",{href:"mailto:divyamgoyal9930@gmail.com",children:"Mail"})]})]})})]})}}]),n}(i.a.Component);n(108);var k=function(){return Object(x.jsx)(R,{})},B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,110)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),s(e),c(e),i(e)}))};r.a.render(Object(x.jsx)(i.a.StrictMode,{children:Object(x.jsx)(k,{})}),document.getElementById("root")),B()},68:function(e,t,n){},69:function(e,t,n){}},[[109,1,2]]]);
//# sourceMappingURL=main.69b6d743.chunk.js.map